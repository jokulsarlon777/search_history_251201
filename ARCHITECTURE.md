# ì•„í‚¤í…ì²˜ ë¬¸ì„œ

AI Research Agentì˜ ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤.

## ëª©ì°¨

1. [ì „ì²´ ê°œìš”](#ì „ì²´-ê°œìš”)
2. [ì‹œìŠ¤í…œ êµ¬ì„± ìš”ì†Œ](#ì‹œìŠ¤í…œ-êµ¬ì„±-ìš”ì†Œ)
3. [ë°ì´í„° íë¦„](#ë°ì´í„°-íë¦„)
4. [ëª¨ë“œë³„ ë™ì‘](#ëª¨ë“œë³„-ë™ì‘)
5. [ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ)
6. [ë””ë ‰í† ë¦¬ êµ¬ì¡°](#ë””ë ‰í† ë¦¬-êµ¬ì¡°)

---

## ì „ì²´ ê°œìš”

### ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ì‚¬ìš©ì (ë¸Œë¼ìš°ì €)                            â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚         research-agent (Next.js Frontend)                   â”‚    â”‚
â”‚  â”‚                                                             â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚    â”‚
â”‚  â”‚  â”‚ ChatInput â”‚  â”‚ Messages â”‚  â”‚ ResearchProgress â”‚         â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚    â”‚
â”‚  â”‚                                                             â”‚    â”‚
â”‚  â”‚  State Management (Zustand)                                â”‚    â”‚
â”‚  â”‚  - useReactMode                                            â”‚    â”‚
â”‚  â”‚  - useQuickMode                                            â”‚    â”‚
â”‚  â”‚  - messages, threads                                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                         â”‚
                â”‚ LangGraph SDK           â”‚ LangGraph SDK
                â”‚ (Streaming)             â”‚ (Streaming)
                â”‚                         â”‚
                â–¼                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   React Agent Backend    â”‚   â”‚ Deep Research Backend     â”‚
â”‚   (í¬íŠ¸ 2025)             â”‚   â”‚ (í¬íŠ¸ 2024)                â”‚
â”‚                          â”‚   â”‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ReAct Agent       â”‚  â”‚   â”‚  â”‚  Research Agent     â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ Reasoning    â”‚  â”‚  â”‚   â”‚  â”‚  â”‚ Planner       â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ Tool Calling â”‚  â”‚  â”‚   â”‚  â”‚  â”‚ Researcher    â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ Answer Gen.  â”‚  â”‚  â”‚   â”‚  â”‚  â”‚ Reporter      â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚           â”‚              â”‚   â”‚            â”‚              â”‚
â”‚           â–¼              â”‚   â”‚            â–¼              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Elasticsearch Tool â”‚  â”‚   â”‚  â”‚  Web Search Tools   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                                â”‚
            â–¼                                â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Elasticsearch   â”‚           â”‚  External Web APIs   â”‚
  â”‚  (í¬íŠ¸ 9200)      â”‚           â”‚  (Tavily, etc.)      â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### í•µì‹¬ ê°œë…

1. **ë“€ì–¼ ë°±ì—”ë“œ ì•„í‚¤í…ì²˜**
   - React Agent: ë¹ ë¥¸ Elasticsearch ê²€ìƒ‰
   - Deep Research: ì‹¬ì¸µ ì›¹ ë¦¬ì„œì¹˜

2. **í´ë¼ì´ì–¸íŠ¸-ì„œë²„ ë¶„ë¦¬**
   - Frontend: React/Next.js (í¬íŠ¸ 3000)
   - Backend 1: React Agent (í¬íŠ¸ 2025)
   - Backend 2: Deep Research (í¬íŠ¸ 2024, ì„ íƒ)

3. **ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë°**
   - LangGraph SDKë¥¼ í†µí•œ Server-Sent Events (SSE)
   - ì²­í¬ ë‹¨ìœ„ ì‘ë‹µ ì „ì†¡

---

## ì‹œìŠ¤í…œ êµ¬ì„± ìš”ì†Œ

### 1. Frontend (research-agent)

#### ê¸°ìˆ  ìŠ¤íƒ
- **Framework**: Next.js 16 (App Router)
- **UI Library**: React 19
- **Styling**: Tailwind CSS v4, shadcn/ui
- **State Management**: Zustand
- **AI SDK**: @langchain/langgraph-sdk

#### ì£¼ìš” ì»´í¬ë„ŒíŠ¸

```
app/
â”œâ”€â”€ page.tsx                    # ë©”ì¸ í˜ì´ì§€ ë° ë¡œì§
â”‚   â”œâ”€â”€ handleSendMessage()    # ë©”ì‹œì§€ ì „ì†¡ ì²˜ë¦¬
â”‚   â”œâ”€â”€ API ì„ íƒ ë¡œì§          # ëª¨ë“œë³„ ë°±ì—”ë“œ ì„ íƒ
â”‚   â”œâ”€â”€ ìŠ¤íŠ¸ë¦¬ë° ì²˜ë¦¬          # ì‹¤ì‹œê°„ ì‘ë‹µ ìˆ˜ì‹ 
â”‚   â””â”€â”€ ìºì‹± ë¡œì§              # React Agent ìºì‹±
â”‚
components/
â”œâ”€â”€ chat-input.tsx             # ì…ë ¥ì°½ + ëª¨ë“œ ë²„íŠ¼
â”‚   â”œâ”€â”€ Quick ë²„íŠ¼
â”‚   â””â”€â”€ Deep Research ë²„íŠ¼
â”‚
â”œâ”€â”€ chat-message.tsx           # ë©”ì‹œì§€ í‘œì‹œ
â”‚   â”œâ”€â”€ Markdown ë Œë”ë§
â”‚   â””â”€â”€ ì†ŒìŠ¤ í‘œì‹œ
â”‚
â”œâ”€â”€ research-progress.tsx      # ì§„í–‰ ìƒí™© í‘œì‹œ
â”‚   â”œâ”€â”€ Thinking ë‹¨ê³„
â”‚   â”œâ”€â”€ Tool ì‚¬ìš© ë‹¨ê³„
â”‚   â””â”€â”€ Answer ì‘ì„± ë‹¨ê³„
â”‚
â””â”€â”€ thread-sidebar.tsx         # Thread ê´€ë¦¬
    â”œâ”€â”€ Thread ëª©ë¡
    â”œâ”€â”€ Thread ì „í™˜
    â””â”€â”€ Thread ì‚­ì œ

store/
â””â”€â”€ app-store.ts               # Zustand ìƒíƒœ ê´€ë¦¬
    â”œâ”€â”€ useReactMode          # Deep Research ëª¨ë“œ ìƒíƒœ
    â”œâ”€â”€ useQuickMode          # Quick ëª¨ë“œ ìƒíƒœ
    â”œâ”€â”€ messages              # ëŒ€í™” ë©”ì‹œì§€
    â””â”€â”€ threads               # Thread ê´€ë¦¬

lib/
â”œâ”€â”€ langgraph.ts              # LangGraph SDK í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ createLangGraphClient()
â”‚   â””â”€â”€ streamMessage()
â”‚
â””â”€â”€ cache.ts                  # ì‘ë‹µ ìºì‹œ ê´€ë¦¬
    â””â”€â”€ ReactModeCache (1ì‹œê°„ TTL)
```

#### ìƒíƒœ ê´€ë¦¬ (Zustand)

```typescript
interface AppStore {
  // ëª¨ë“œ ìƒíƒœ
  useReactMode: boolean;      // true = Deep Research, false = React Agent
  useQuickMode: boolean;      // true = Quick Mode
  setUseReactMode: (value: boolean) => void;
  setUseQuickMode: (value: boolean) => void;

  // ë©”ì‹œì§€ ìƒíƒœ
  messages: Message[];
  addMessage: (message: Message) => void;
  clearMessages: () => void;

  // Thread ìƒíƒœ
  threads: Thread[];
  currentThreadId: string | null;
  // ... Thread ê´€ë¦¬ í•¨ìˆ˜ë“¤
}
```

### 2. React Agent Backend (backend-react)

#### ê¸°ìˆ  ìŠ¤íƒ
- **Framework**: LangGraph
- **LLM**: OpenAI GPT-4o-mini
- **Search**: Elasticsearch
- **Pattern**: ReAct (Reasoning + Acting)

#### ReAct ì—ì´ì „íŠ¸ êµ¬ì¡°

```python
# agent/react_agent.py

StateGraph:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  agent   â”‚  â† ì‹œì‘ì 
  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â†’ [Thinking] LLM í˜¸ì¶œ (ì¶”ë¡ )
       â”‚
       â”œâ”€â†’ [Tool Calling] LLM í˜¸ì¶œ (ë„êµ¬ ì„ íƒ)
       â”‚
       â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  tools   â”‚  â† Elasticsearch ê²€ìƒ‰
  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  agent   â”‚  â† ë„êµ¬ ê²°ê³¼ë¡œ ìµœì¢… ë‹µë³€ ìƒì„±
  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
     END
```

#### ë„êµ¬ (Tools)

```python
# tools/elasticsearch_tool.py

elasticsearch_search:
  ì…ë ¥:
    - query: str              # ê²€ìƒ‰ ì¿¼ë¦¬
    - index: str              # ì¸ë±ìŠ¤ ì´ë¦„
    - size: int               # ê²°ê³¼ ê°œìˆ˜

  ì¶œë ¥:
    - ê²€ìƒ‰ ê²°ê³¼ (êµ¬ì¡°í™”ëœ í˜•ì‹)
    - ì†ŒìŠ¤ ì •ë³´
```

#### ì‘ë‹µ í˜•ì‹

```python
# 3ë‹¨ê³„ ì‘ë‹µ êµ¬ì¡°

STEP 1: Thinking
"""
ğŸ¤” Thinking
[ê²€ìƒ‰ ê³„íš ì„¤ëª…]
"""

STEP 2: Tool ì‚¬ìš©
"""
ğŸ”§ Tool í˜¸ì¶œ ì •ë³´:
- ë„êµ¬: elasticsearch_search
- íŒŒë¼ë¯¸í„°:
  - query: "ê²€ìƒ‰ì–´"
  - index: "ì¸ë±ìŠ¤ëª…"

[ê²€ìƒ‰ ê²°ê³¼]
"""

STEP 3: ë‹µë³€ ì‘ì„±
"""
ğŸ“Š ê²€ìƒ‰ ê²°ê³¼ ìš”ì•½
- ì´ Nê°œì˜ ê²°ê³¼

ğŸ” ìƒì„¸ ë‚´ìš©
[êµ¬ì¡°í™”ëœ ê²°ê³¼]

ğŸ’¡ ê²°ë¡ 
[ì¢…í•© ë‹µë³€]
"""
```

### 3. Deep Research Backend (ì„ íƒ)

ì´ í”„ë¡œì íŠ¸ì—ì„œëŠ” ë³„ë„ êµ¬í˜„ì´ ì—†ì§€ë§Œ, ì—°ë™ ê°€ëŠ¥í•œ êµ¬ì¡°ì…ë‹ˆë‹¤.

#### íŠ¹ì§•
- ì›¹ ê²€ìƒ‰ ê¸°ë°˜
- ë‹¤ë‹¨ê³„ ë¦¬ì„œì¹˜
- ìƒì„¸í•œ ë¶„ì„

---

## ë°ì´í„° íë¦„

### 1. React Agent ëª¨ë“œ (ê¸°ë³¸ê°’)

```
ì‚¬ìš©ì ì…ë ¥
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend: page.tsx              â”‚
â”‚ - useReactMode = false          â”‚
â”‚ - useQuickMode = false          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”œâ”€â†’ ìºì‹œ í™•ì¸ (ReactModeCache)
             â”‚   â”œâ”€â†’ ìºì‹œ ì ì¤‘: ì¦‰ì‹œ ì‘ë‹µ ë°˜í™˜
             â”‚   â””â”€â†’ ìºì‹œ ë¯¸ìŠ¤: ê³„ì† ì§„í–‰
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LangGraph SDK                   â”‚
â”‚ - client.runs.stream()          â”‚
â”‚ - URL: http://127.0.0.1:2025    â”‚
â”‚ - assistant_id: "react_agent"   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ React Agent Backend             â”‚
â”‚                                 â”‚
â”‚ 1ï¸âƒ£ agent ë…¸ë“œ (Thinking)       â”‚
â”‚    - SystemMessage(REASONING)   â”‚
â”‚    - LLM.invoke()               â”‚
â”‚    - ì¶œë ¥: "ğŸ¤” Thinking..."     â”‚
â”‚    â”‚                            â”‚
â”‚    â–¼ (ìŠ¤íŠ¸ë¦¬ë°)                 â”‚
â”‚                                 â”‚
â”‚ 2ï¸âƒ£ agent ë…¸ë“œ (Tool Calling)   â”‚
â”‚    - LLM.bind_tools()           â”‚
â”‚    - ë„êµ¬ ì„ íƒ                  â”‚
â”‚    â”‚                            â”‚
â”‚    â–¼                            â”‚
â”‚                                 â”‚
â”‚ 3ï¸âƒ£ tools ë…¸ë“œ                  â”‚
â”‚    - elasticsearch_search()     â”‚
â”‚    - ê²€ìƒ‰ ì‹¤í–‰                  â”‚
â”‚    - ì¶œë ¥: "ğŸ”§ Tool í˜¸ì¶œ..."    â”‚
â”‚    â”‚                            â”‚
â”‚    â–¼ (ìŠ¤íŠ¸ë¦¬ë°)                 â”‚
â”‚                                 â”‚
â”‚ 4ï¸âƒ£ agent ë…¸ë“œ (Answer)         â”‚
â”‚    - SystemMessage(ANSWER)      â”‚
â”‚    - LLM.invoke()               â”‚
â”‚    - ì¶œë ¥: "ğŸ“Š ê²€ìƒ‰ ê²°ê³¼..."    â”‚
â”‚    â”‚                            â”‚
â”‚    â–¼ (ìŠ¤íŠ¸ë¦¬ë°)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend: ìŠ¤íŠ¸ë¦¬ë° ì²˜ë¦¬          â”‚
â”‚                                 â”‚
â”‚ 1. ë‹¨ê³„ ê°ì§€                    â”‚
â”‚    - "ğŸ¤” Thinking" â†’ Stage 1    â”‚
â”‚    - "ğŸ”§ Tool" â†’ Stage 2        â”‚
â”‚    - "ğŸ“Š ê²°ê³¼" â†’ Stage 3        â”‚
â”‚                                 â”‚
â”‚ 2. UI ì—…ë°ì´íŠ¸                  â”‚
â”‚    - ResearchProgress í‘œì‹œ      â”‚
â”‚    - ë©”ì‹œì§€ ì¶”ê°€                â”‚
â”‚                                 â”‚
â”‚ 3. ìºì‹± ì €ì¥                    â”‚
â”‚    - ReactModeCache.set()       â”‚
â”‚    - TTL: 3600ì´ˆ (1ì‹œê°„)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
        ì‚¬ìš©ìì—ê²Œ í‘œì‹œ
```

### 2. Quick/Deep Research ëª¨ë“œ

```
ì‚¬ìš©ì ì…ë ¥
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend: page.tsx              â”‚
â”‚ - useReactMode = true (ë˜ëŠ”)    â”‚
â”‚ - useQuickMode = true           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”œâ”€â†’ ìºì‹œ í™•ì¸ ì•ˆ í•¨ (ìŠ¤í‚µ)
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LangGraph SDK                   â”‚
â”‚ - URL: http://127.0.0.1:2024    â”‚
â”‚ - assistant_id: "Deep Researcher"â”‚
â”‚ - params: activeParams          â”‚
â”‚   (Quick ëª¨ë“œë©´ ì œí•œëœ íŒŒë¼ë¯¸í„°) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Deep Research Backend           â”‚
â”‚ - ì›¹ ê²€ìƒ‰                       â”‚
â”‚ - ë‹¤ë‹¨ê³„ ë¦¬ì„œì¹˜                 â”‚
â”‚ - ìƒì„¸ ë¶„ì„                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
        ì‚¬ìš©ìì—ê²Œ í‘œì‹œ
        (ìºì‹± ì—†ìŒ)
```

---

## ëª¨ë“œë³„ ë™ì‘

### ëª¨ë“œ ì „í™˜ ë¡œì§

```typescript
// app/page.tsx

// API URL ì„ íƒ
const selectedApiUrl = useReactMode
  ? LANGGRAPH_API_URL              // Deep Research
  : REACT_AGENT_URL;               // React Agent (ê¸°ë³¸)

// Assistant ID ì„ íƒ
const selectedAssistantId = useReactMode
  ? "Deep Researcher"
  : "react_agent";

// íŒŒë¼ë¯¸í„° ì „ë‹¬
const params = useReactMode
  ? activeParams                   // Deep Researchì— íŒŒë¼ë¯¸í„° ì „ë‹¬
  : {};                            // React AgentëŠ” íŒŒë¼ë¯¸í„° ì—†ìŒ

// ìºì‹± ì ìš©
if (!useReactMode && !useQuickMode) {
  // React Agent ëª¨ë“œì¼ ë•Œë§Œ ìºì‹±
  const cached = reactModeCache.get(content);
  if (cached) return cached;
}
```

### ìƒí˜¸ ë°°íƒ€ì  ëª¨ë“œ

```typescript
// store/app-store.ts

setUseQuickMode: (value: boolean) => {
  if (value) {
    // Quick ëª¨ë“œë¥¼ ì¼¤ ë•Œ Deep Research ë„ê¸°
    set({ useQuickMode: true, useReactMode: false });
  } else {
    set({ useQuickMode: false });
  }
}

setUseReactMode: (value: boolean) => {
  if (value) {
    // Deep Research ëª¨ë“œë¥¼ ì¼¤ ë•Œ Quick ë„ê¸°
    set({ useReactMode: true, useQuickMode: false });
  } else {
    set({ useReactMode: false });
  }
}
```

---

## ê¸°ìˆ  ìŠ¤íƒ

### Frontend ìƒì„¸

```
Next.js 16
â”œâ”€â”€ React 19                      # UI ë¼ì´ë¸ŒëŸ¬ë¦¬
â”œâ”€â”€ TypeScript                    # íƒ€ì… ì•ˆì „ì„±
â”œâ”€â”€ Tailwind CSS v4               # ìŠ¤íƒ€ì¼ë§
â”œâ”€â”€ shadcn/ui                     # UI ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ Button
â”‚   â”œâ”€â”€ Textarea
â”‚   â”œâ”€â”€ Sidebar
â”‚   â””â”€â”€ ...
â”œâ”€â”€ Zustand                       # ìƒíƒœ ê´€ë¦¬
â”œâ”€â”€ @langchain/langgraph-sdk      # LangGraph í´ë¼ì´ì–¸íŠ¸
â”œâ”€â”€ react-markdown                # Markdown ë Œë”ë§
â”œâ”€â”€ remark-gfm                    # GitHub Flavored Markdown
â””â”€â”€ next-themes                   # ë‹¤í¬ ëª¨ë“œ
```

### Backend ìƒì„¸

```
LangGraph
â”œâ”€â”€ LangChain Core                # ê¸°ë³¸ ì¶”ìƒí™”
â”œâ”€â”€ LangChain OpenAI              # OpenAI í†µí•©
â”œâ”€â”€ Elasticsearch (Python)        # ê²€ìƒ‰ í´ë¼ì´ì–¸íŠ¸
â””â”€â”€ FastAPI (ë‚´ì¥)                # HTTP ì„œë²„
```

---

## ë””ë ‰í† ë¦¬ êµ¬ì¡°

### ì „ì²´ í”„ë¡œì íŠ¸

```
claude_code/
â”‚
â”œâ”€â”€ README.md                    # ë©”ì¸ ë¬¸ì„œ
â”œâ”€â”€ QUICKSTART.md               # ë¹ ë¥¸ ì‹œì‘ ê°€ì´ë“œ
â”œâ”€â”€ ARCHITECTURE.md             # ì´ ë¬¸ì„œ
â”‚
â”œâ”€â”€ research-agent/             # í”„ë¡ íŠ¸ì—”ë“œ
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ globals.css
â”‚   â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”‚   â””â”€â”€ page.tsx            # ë©”ì¸ ë¡œì§
â”‚   â”‚
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ui/                 # shadcn/ui ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ chat-input.tsx
â”‚   â”‚   â”œâ”€â”€ chat-message.tsx
â”‚   â”‚   â”œâ”€â”€ research-progress.tsx
â”‚   â”‚   â””â”€â”€ thread-sidebar.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ langgraph.ts        # SDK í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â”œâ”€â”€ cache.ts            # ìºì‹±
â”‚   â”‚   â”œâ”€â”€ types.ts            # íƒ€ì… ì •ì˜
â”‚   â”‚   â””â”€â”€ utils.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ store/
â”‚   â”‚   â””â”€â”€ app-store.ts        # Zustand ìŠ¤í† ì–´
â”‚   â”‚
â”‚   â”œâ”€â”€ .env.local              # í™˜ê²½ ë³€ìˆ˜
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â””â”€â”€ tailwind.config.ts
â”‚
â””â”€â”€ backend-react/              # React Agent ë°±ì—”ë“œ
    â”œâ”€â”€ agent/
    â”‚   â”œâ”€â”€ react_agent.py      # ReAct ì—ì´ì „íŠ¸
    â”‚   â””â”€â”€ state.py            # ìƒíƒœ ì •ì˜
    â”‚
    â”œâ”€â”€ tools/
    â”‚   â”œâ”€â”€ elasticsearch_tool.py
    â”‚   â””â”€â”€ elasticsearch_search.py
    â”‚
    â”œâ”€â”€ config/
    â”‚   â””â”€â”€ indices.json        # ì¸ë±ìŠ¤ ì„¤ì •
    â”‚
    â”œâ”€â”€ .env                    # í™˜ê²½ ë³€ìˆ˜
    â”œâ”€â”€ langgraph.json          # LangGraph ì„¤ì •
    â”œâ”€â”€ requirements.txt
    â””â”€â”€ README.md
```

---

## í™•ì¥ì„± ë° ì»¤ìŠ¤í„°ë§ˆì´ì§•

### 1. ìƒˆë¡œìš´ ë„êµ¬ ì¶”ê°€

```python
# tools/custom_tool.py

from langchain_core.tools import tool

@tool
def custom_search(query: str, param: str) -> str:
    """ì»¤ìŠ¤í…€ ê²€ìƒ‰ ë„êµ¬"""
    # êµ¬í˜„
    return result

# agent/react_agent.pyì—ì„œ ë“±ë¡
tools = [elasticsearch_search, custom_search]
```

### 2. ìƒˆë¡œìš´ ëª¨ë“œ ì¶”ê°€

```typescript
// 1. store/app-store.tsì— ìƒíƒœ ì¶”ê°€
useCustomMode: boolean;
setUseCustomMode: (value: boolean) => void;

// 2. components/chat-input.tsxì— ë²„íŠ¼ ì¶”ê°€
<Button onClick={() => setUseCustomMode(!useCustomMode)}>
  Custom Mode
</Button>

// 3. app/page.tsxì—ì„œ ë¡œì§ ì¶”ê°€
const selectedApiUrl = useCustomMode
  ? CUSTOM_API_URL
  : (useReactMode ? LANGGRAPH_API_URL : REACT_AGENT_URL);
```

### 3. Elasticsearch ì¸ë±ìŠ¤ ì¶”ê°€

```json
// config/indices.json

{
  "new_index": {
    "display_name": "ìƒˆ ì¸ë±ìŠ¤",
    "description": "ì„¤ëª…",
    "search_fields": ["title^2", "content"],
    "source_fields": ["title", "content", "url"],
    "result_format": {
      "type": "document",
      "title_field": "title",
      "content_field": "content"
    }
  }
}
```

---

## ì„±ëŠ¥ ìµœì í™”

### 1. ìºì‹± ì „ëµ
- React Agent ì‘ë‹µ 1ì‹œê°„ ìºì‹±
- ë¸Œë¼ìš°ì € ë©”ëª¨ë¦¬ ê¸°ë°˜ (LRU)
- ìºì‹œ í‚¤: ì¿¼ë¦¬ ë¬¸ìì—´

### 2. ìŠ¤íŠ¸ë¦¬ë° ìµœì í™”
- Server-Sent Events (SSE)
- ì²­í¬ ë‹¨ìœ„ ì „ì†¡
- ë¶€ë¶„ ë Œë”ë§

### 3. ì¸ë±ì‹± ìµœì í™”
- Elasticsearch ì¸ë±ìŠ¤ ìµœì í™”
- ì ì ˆí•œ ë§¤í•‘ ì„¤ì •
- ìƒ¤ë“œ ë° ë ˆí”Œë¦¬ì¹´ ì„¤ì •

---

## ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### 1. API í‚¤ ê´€ë¦¬
- í™˜ê²½ ë³€ìˆ˜ë¡œ ê´€ë¦¬
- `.env` íŒŒì¼ì€ `.gitignore`ì— ì¶”ê°€
- í”„ë¡œë•ì…˜: í™˜ê²½ ë³€ìˆ˜ ë˜ëŠ” ì‹œí¬ë¦¿ ê´€ë¦¬ ë„êµ¬ ì‚¬ìš©

### 2. CORS ì„¤ì •
- í”„ë¡ íŠ¸ì—”ë“œ ë„ë©”ì¸ë§Œ í—ˆìš©
- ê°œë°œ í™˜ê²½ê³¼ í”„ë¡œë•ì…˜ í™˜ê²½ ë¶„ë¦¬

### 3. Rate Limiting
- API í˜¸ì¶œ ì œí•œ
- ë‚¨ìš© ë°©ì§€

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸:** 2025-12-01
